{"ast":null,"code":"var _jsxFileName = \"/home/assassin/Aashutosh_Git/projectx/client/src/components/ResLog/SignIn.js\";\nimport React, { useContext, useEffect } from \"react\";\nimport { useFormik } from \"formik\";\nimport Axios from 'axios';\nimport { AuthContext } from '../../context/auth';\nimport { Spinner } from 'react-bootstrap'; // import 'bootstrap/dist/css/bootstrap.min.css';\n\nimport { Redirect } from \"react-router\";\n\nconst SignIn = props => {\n  const initialValues = {\n    password: \"\",\n    usn: \"\"\n  };\n  const {\n    state,\n    dispatch\n  } = useContext(AuthContext);\n\n  const onSubmit = async ({\n    usn,\n    password\n  }) => {\n    try {\n      dispatch({\n        type: 'Login_Start'\n      });\n      const body = JSON.stringify({\n        usn,\n        password: password.toLowerCase()\n      });\n      const res = await Axios.post('/getLogin', body, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      dispatch({\n        type: 'Login',\n        payload: {\n          user: res.data.user\n        }\n      });\n    } catch (err) {\n      console.log(err.response.data);\n      dispatch({\n        type: \"LOGIN_FAIL\",\n        payload: {\n          error: err.response.data.errors\n        }\n      });\n    }\n  };\n\n  const validate = values => {\n    let errors = {};\n\n    if (!values.usn) {\n      // console.log('hello')\n      errors.usn = \"Required\";\n    }\n\n    if (!values.password) {\n      errors.password = \"Required\";\n    }\n\n    return errors;\n  };\n\n  const formik = useFormik({\n    initialValues,\n    validate,\n    onSubmit\n  });\n  useEffect(() => {\n    formik.resetForm();\n  }, [props, state]);\n  let jsx = !state.loading ? /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: formik.handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, \"Sign in\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, \"or use your account\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: !(formik.touched.usn && formik.errors.usn) ? \"USN\" : formik.errors.usn,\n    name: \"usn\",\n    onBlur: formik.handleBlur,\n    onChange: formik.handleChange,\n    value: formik.values.usn,\n    className: formik.touched.usn && formik.errors.usn ? \"error\" : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    onBlur: formik.handleBlur,\n    placeholder: !(formik.touched.password && formik.errors.password) ? \"Password\" : formik.errors.password,\n    name: \"password\",\n    onChange: formik.handleChange,\n    value: formik.values.password,\n    className: formik.touched.password && formik.errors.password ? \"error\" : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, \"Forgot your password?\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"new\",\n    onClick: props.onMobAniSignUp,\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, \"SignUp\")) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"relative\",\n      left: \"45%\",\n      top: \"40%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    variant: \"primary\",\n    size: \"ml\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }));\n\n  if (state.isLoggedIn) {\n    jsx = /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, jsx);\n};\n\nexport default SignIn;","map":{"version":3,"sources":["/home/assassin/Aashutosh_Git/projectx/client/src/components/ResLog/SignIn.js"],"names":["React","useContext","useEffect","useFormik","Axios","AuthContext","Spinner","Redirect","SignIn","props","initialValues","password","usn","state","dispatch","onSubmit","type","body","JSON","stringify","toLowerCase","res","post","headers","payload","user","data","err","console","log","response","error","errors","validate","values","formik","resetForm","jsx","loading","handleSubmit","touched","handleBlur","handleChange","onMobAniSignUp","position","left","top","isLoggedIn"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { useFormik } from \"formik\";\nimport Axios from 'axios'\nimport {AuthContext} from '../../context/auth'\nimport {Spinner} from 'react-bootstrap'\n// import 'bootstrap/dist/css/bootstrap.min.css';\nimport { Redirect } from \"react-router\";\nconst SignIn = (props) => {\n  const initialValues={\n    \n    password: \"\",\n    usn: \"\",\n  \n};\nconst {state,dispatch}=useContext(AuthContext);\n\nconst onSubmit=async ({usn,password})=>{\n  try{\n    dispatch({\n      type:'Login_Start'\n    })\n    const body=JSON.stringify({usn,password:password.toLowerCase()});\n  const res=await Axios.post('/getLogin',body,{\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n  \n\n  dispatch({\n    type:'Login',\n    payload:{\n      user:res.data.user\n    }\n  })\n}\n  catch(err){\n    console.log(err.response.data);\n    dispatch({\n      type:\"LOGIN_FAIL\",\n      payload:{\n        error:err.response.data.errors\n      }\n    })\n  }\n\n}\n\n  \n\n\n  const validate = (values) => {\n    let errors = {};\n    if (!values.usn) {\n      // console.log('hello')\n      errors.usn = \"Required\";\n    }\n    if (!values.password) {\n      errors.password = \"Required\";\n    }\n\n    return errors;\n  };\n  const formik = useFormik({\n    initialValues,\n    validate,\n\n    onSubmit\n  });\n\n  useEffect(() => {\n   \n    formik.resetForm();\n    \n    \n  }, [props,state])\n  let  jsx=(!state.loading)?\n    <form onSubmit={formik.handleSubmit}>\n      <h1>Sign in</h1>\n\n      <span>or use your account</span>\n      <input\n        type=\"text\"\n        placeholder={!(formik.touched.usn&&formik.errors.usn)?\"USN\":formik.errors.usn}\n        name=\"usn\"\n        onBlur={formik.handleBlur}\n        onChange={formik.handleChange}\n        value={formik.values.usn}\n        className={(formik.touched.usn&&formik.errors.usn)?\"error\":null}\n      />\n      <input\n        type=\"password\"\n        onBlur={formik.handleBlur}\n        placeholder={!(formik.touched.password&&formik.errors.password)?\"Password\":formik.errors.password}\n        name=\"password\"\n        onChange={formik.handleChange}\n        value={formik.values.password}\n        className={(formik.touched.password&&formik.errors.password)?\"error\":null}\n      />\n      <a href=\"/\">Forgot your password?</a>\n      <button type=\"submit\" >Sign In</button>\n      <button id=\"new\" onClick={props.onMobAniSignUp} type=\"button\">\n        SignUp\n      </button>\n    </form>:(\n      <div style={{position:\"relative\",left:\"45%\",top:\"40%\"}}>\n      <Spinner animation=\"border\" variant=\"primary\"  size=\"ml\"/>\n      </div>)\n    \n  if(state.isLoggedIn){\n    jsx=<Redirect to=\"/\"/>\n  }\n\n  return (\n    <>\n    {jsx}\n    \n    </>\n  );\n};\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}