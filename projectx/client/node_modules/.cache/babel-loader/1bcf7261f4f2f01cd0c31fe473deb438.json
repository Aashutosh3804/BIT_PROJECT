{"ast":null,"code":"var _jsxFileName = \"/home/assassin/Aashutosh_Git/projectx/client/src/components/ResLog/SignIn.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport Axios from 'axios';\nimport { AuthContext } from '../../context/auth';\nimport { Spinner } from 'react-bootstrap'; // import 'bootstrap/dist/css/bootstrap.min.css';\n\nimport { Redirect } from \"react-router\";\n\nconst SignIn = props => {\n  const initialValues = {\n    password: \"\",\n    usn: \"\"\n  };\n  const [err, setError] = useState([]);\n  const {\n    state,\n    dispatch\n  } = useContext(AuthContext);\n\n  const onSubmit = async ({\n    usn,\n    password\n  }) => {\n    try {\n      dispatch({\n        type: 'Login_Start'\n      });\n      const body = JSON.stringify({\n        usn,\n        password: password.toLowerCase()\n      });\n      const res = await Axios.post('/getLogin', body, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      dispatch({\n        type: 'Login',\n        payload: {\n          user: res.data.user\n        }\n      });\n    } catch (error) {\n      console.log(error.response.data);\n      dispatch({\n        type: \"LOGIN_FAIL\"\n      });\n      setError(error.response.data.errors);\n    }\n  };\n\n  let err_jsx;\n\n  if (err.length > 0) {\n    err_jsx = err.forEach(er => /*#__PURE__*/React.createElement(\"h4\", {\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 27\n      }\n    }, er.message));\n  }\n\n  const validate = values => {\n    let errors = {};\n\n    if (!values.usn) {\n      // console.log('hello')\n      errors.usn = \"Required\";\n    }\n\n    if (!values.password) {\n      errors.password = \"Required\";\n    }\n\n    return errors;\n  };\n\n  const formik = useFormik({\n    initialValues,\n    validate,\n    onSubmit\n  });\n  useEffect(() => {\n    formik.resetForm();\n  }, [props, state]);\n  let jsx = !state.loading ? /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: formik.handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, \"Sign in\"), err_jsx, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"or use your account\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: !(formik.touched.usn && formik.errors.usn) ? \"USN\" : formik.errors.usn,\n    name: \"usn\",\n    onBlur: formik.handleBlur,\n    onChange: formik.handleChange,\n    value: formik.values.usn,\n    className: formik.touched.usn && formik.errors.usn ? \"error\" : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    onBlur: formik.handleBlur,\n    placeholder: !(formik.touched.password && formik.errors.password) ? \"Password\" : formik.errors.password,\n    name: \"password\",\n    onChange: formik.handleChange,\n    value: formik.values.password,\n    className: formik.touched.password && formik.errors.password ? \"error\" : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, \"Forgot your password?\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"new\",\n    onClick: props.onMobAniSignUp,\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, \"SignUp\")) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"relative\",\n      left: \"45%\",\n      top: \"40%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    variant: \"primary\",\n    size: \"ml\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }));\n\n  if (state.isLoggedIn) {\n    jsx = /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, jsx);\n};\n\nexport default SignIn;","map":{"version":3,"sources":["/home/assassin/Aashutosh_Git/projectx/client/src/components/ResLog/SignIn.js"],"names":["React","useContext","useEffect","useState","useFormik","Axios","AuthContext","Spinner","Redirect","SignIn","props","initialValues","password","usn","err","setError","state","dispatch","onSubmit","type","body","JSON","stringify","toLowerCase","res","post","headers","payload","user","data","error","console","log","response","errors","err_jsx","length","forEach","er","color","message","validate","values","formik","resetForm","jsx","loading","handleSubmit","touched","handleBlur","handleChange","onMobAniSignUp","position","left","top","isLoggedIn"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport Axios from 'axios'\nimport {AuthContext} from '../../context/auth'\nimport {Spinner} from 'react-bootstrap'\n// import 'bootstrap/dist/css/bootstrap.min.css';\nimport { Redirect } from \"react-router\";\nconst SignIn = (props) => {\n  const initialValues={\n    \n    password: \"\",\n    usn: \"\",\n  \n};\nconst [err,setError]=useState([]);\nconst {state,dispatch}=useContext(AuthContext);\n\nconst onSubmit=async ({usn,password})=>{\n  try{\n    dispatch({\n      type:'Login_Start'\n    })\n    const body=JSON.stringify({usn,password:password.toLowerCase()});\n  const res=await Axios.post('/getLogin',body,{\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n  \n\n  dispatch({\n    type:'Login',\n    payload:{\n      user:res.data.user\n    }\n  })\n}\n  catch(error){\n    console.log(error.response.data);\n    dispatch({\n      type:\"LOGIN_FAIL\",\n    })\n    setError(error.response.data.errors);\n\n  }\n\n}\nlet err_jsx;\nif(err.length>0){\n  err_jsx=err.forEach(er=><h4 style={{color:\"red\"}}>{er.message}</h4>)\n}\n  \n\n\n  const validate = (values) => {\n    let errors = {};\n    if (!values.usn) {\n      // console.log('hello')\n      errors.usn = \"Required\";\n    }\n    if (!values.password) {\n      errors.password = \"Required\";\n    }\n\n    return errors;\n  };\n  const formik = useFormik({\n    initialValues,\n    validate,\n\n    onSubmit\n  });\n\n  useEffect(() => {\n   \n    formik.resetForm();\n    \n    \n  }, [props,state])\n  let  jsx=(!state.loading)?\n    <form onSubmit={formik.handleSubmit}>\n      <h1>Sign in</h1>\n      {err_jsx}\n\n      <span>or use your account</span>\n      <input\n        type=\"text\"\n        placeholder={!(formik.touched.usn&&formik.errors.usn)?\"USN\":formik.errors.usn}\n        name=\"usn\"\n        onBlur={formik.handleBlur}\n        onChange={formik.handleChange}\n        value={formik.values.usn}\n        className={(formik.touched.usn&&formik.errors.usn)?\"error\":null}\n      />\n      <input\n        type=\"password\"\n        onBlur={formik.handleBlur}\n        placeholder={!(formik.touched.password&&formik.errors.password)?\"Password\":formik.errors.password}\n        name=\"password\"\n        onChange={formik.handleChange}\n        value={formik.values.password}\n        className={(formik.touched.password&&formik.errors.password)?\"error\":null}\n      />\n      <a href=\"/\">Forgot your password?</a>\n      <button type=\"submit\" >Sign In</button>\n      <button id=\"new\" onClick={props.onMobAniSignUp} type=\"button\">\n        SignUp\n      </button>\n    </form>:(\n      <div style={{position:\"relative\",left:\"45%\",top:\"40%\"}}>\n      <Spinner animation=\"border\" variant=\"primary\"  size=\"ml\"/>\n      </div>)\n    \n  if(state.isLoggedIn){\n    jsx=<Redirect to=\"/\"/>\n  }\n\n  return (\n    <>\n    {jsx}\n    \n    </>\n  );\n};\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}